# ============================================================================
# CONFIGURACIÓN GIS API v2.0 - FlatGeobuf + PostGIS
# ============================================================================
# Copia este archivo a .env y ajusta los valores según tu configuración

# ============================================================================
# POSTGIS DATABASE
# ============================================================================
POSTGIS_HOST=localhost
POSTGIS_PORT=5432
POSTGIS_DATABASE=GIS
POSTGIS_USER=manuel
POSTGIS_PASSWORD=Aa123456

# ============================================================================
# DIRECTORIOS DE DATOS
# ============================================================================
# Directorio con archivos FlatGeobuf (para frontend)
FGB_DIR=capas/fgb

# Directorio con archivos GeoPackage (fallback)
GPKG_DIR=capas/gpkg

# Directorio con Shapefiles (legacy)
SHP_DIR=capas/shp

# ============================================================================
# SERVIDOR FASTAPI
# ============================================================================
# Host y puerto del servidor
SERVER_HOST=0.0.0.0
SERVER_PORT=8000

# Modo debug (True/False)
DEBUG=True

# Número de workers (producción)
WORKERS=4

# ============================================================================
# CORS (Cross-Origin Resource Sharing)
# ============================================================================
# Origenes permitidos (separados por comas)
# Usar "*" para permitir todos (solo desarrollo)
CORS_ORIGINS=*

# ============================================================================
# LOGGING
# ============================================================================
# Nivel de logging: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Archivo de log (dejar vacío para solo consola)
LOG_FILE=

# ============================================================================
# CACHÉ
# ============================================================================
# Habilitar caché de consultas (True/False)
CACHE_ENABLED=True

# Tiempo de vida del caché en segundos
CACHE_TTL=3600

# ============================================================================
# FLATGEOBUF
# ============================================================================
# Límite de features por request (evitar sobrecarga)
FGB_MAX_FEATURES=1000

# Tamaño máximo de archivo FGB en MB
FGB_MAX_SIZE_MB=100

# ============================================================================
# ANÁLISIS
# ============================================================================
# Formato preferido para análisis backend: postgis, fgb, gpkg
ANALYSIS_PREFERRED_FORMAT=postgis

# Buffer por defecto para análisis (metros)
DEFAULT_BUFFER_METERS=100

# ============================================================================
# FRONTEND
# ============================================================================
# URL base de la API (para despliegues)
API_BASE_URL=http://localhost:8000

# Coordenadas iniciales del mapa
MAP_CENTER_LAT=36.8381
MAP_CENTER_LON=-2.4597
MAP_INITIAL_ZOOM=10

# ============================================================================
# SEGURIDAD
# ============================================================================
# Secret key para JWT (generar con: openssl rand -hex 32)
SECRET_KEY=tu_secret_key_aqui

# Algoritmo de encriptación
ALGORITHM=HS256

# Tiempo de expiración de tokens (minutos)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# LÍMITES DE RATE LIMITING
# ============================================================================
# Requests por minuto
RATE_LIMIT_PER_MINUTE=60

# Requests por hora
RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# NOTAS
# ============================================================================
# 
# 1. POSTGIS: Si no tienes PostGIS, el sistema funcionará con FGB/GPKG
# 
# 2. DIRECTORIOS: Asegúrate de que existan los directorios configurados
#    mkdir -p capas/{fgb,gpkg,shp}
# 
# 3. PRODUCCIÓN: Para producción, cambiar:
#    - DEBUG=False
#    - CORS_ORIGINS a dominios específicos
#    - Generar nuevo SECRET_KEY
#    - Usar más WORKERS según CPU
# 
# 4. FLATGEOBUF: Los archivos .fgb se sirven como estáticos
#    Asegúrate de que tu servidor web soporte HTTP Range Requests
# 
# 5. SEGURIDAD: NO subir este archivo con credenciales reales a Git
#    Usar .env que está en .gitignore
# 
